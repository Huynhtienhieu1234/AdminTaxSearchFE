<div class="p-6 bg-slate-50 min-h-screen">
    <h2 class="text-2xl font-bold mb-6 text-sky-700 flex items-center gap-2">
        üë• Qu·∫£n l√Ω ng∆∞·ªùi d√πng
    </h2>

    <!-- N√∫t th√™m ng∆∞·ªùi d√πng -->
    <div class="mb-4">
        <button (click)="onAddUser()"
            class="px-4 py-2 text-sm font-semibold rounded bg-sky-600 text-white hover:bg-sky-700 transition cursor-pointer">
            ‚ûï Th√™m ng∆∞·ªùi d√πng
        </button>
    </div>

    <div *ngIf="error" class="text-red-600 font-semibold mb-4">
        ‚ùå {{ error }}
    </div>

    <div class="overflow-x-auto rounded-xl shadow-lg border border-slate-200 bg-white">
        <table class="min-w-full text-sm text-left text-gray-700">
            <thead class="bg-sky-100 text-sky-800">
                <tr>
                    <th class="px-4 py-3 font-semibold text-center">STT</th>
                    <th class="px-4 py-3 font-semibold">T√†i kho·∫£n</th>
                    <th class="px-4 py-3 font-semibold">Email</th>
                    <th class="px-4 py-3 font-semibold">Vai tr√≤</th>
                    <th class="px-4 py-3 font-semibold text-center">Tr·∫°ng th√°i</th>
                    <th class="px-4 py-3 font-semibold text-center">T√°c v·ª•</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let u of paginatedUsers; let i = index" class="border-t hover:bg-slate-50 transition">
                    <td class="px-4 py-2 text-center">{{ (currentPage - 1) * pageSize + i + 1 }}</td>
                    <td class="px-4 py-2">{{ u.username }}</td>
                    <td class="px-4 py-2">{{ u.email || '‚Äî' }}</td>
                    <td class="px-4 py-2">#{{ u.roleId }}</td>
                    <td class="px-4 py-2 text-center">
                        <span *ngIf="u.isActive"
                            class="px-3 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-700">
                            ƒêang ho·∫°t ƒë·ªông
                        </span>
                        <span *ngIf="!u.isActive"
                            class="px-3 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-700">
                            Ng∆∞ng ho·∫°t ƒë·ªông
                        </span>
                    </td>
                    <td class="px-4 py-2 text-center space-x-2">
                        <button
                            class="px-3 py-1 text-xs rounded bg-blue-100 text-blue-700 hover:bg-blue-200 transition cursor-pointer">S·ª≠a</button>
                        <button
                            class="px-3 py-1 text-xs rounded bg-red-100 text-red-700 hover:bg-red-200 transition cursor-pointer">X√≥a</button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

    <!-- Ph√¢n trang -->
    <div class="mt-6 flex justify-center items-center gap-2 text-sm text-gray-700 flex-wrap">
        <button *ngFor="let page of [].constructor(totalPages); let i = index" (click)="changePage(i + 1)"
            [class.bg-sky-600]="currentPage === i + 1" [class.text-white]="currentPage === i + 1"
            class="px-3 py-1 rounded border border-sky-300 hover:bg-sky-200 transition cursor-pointer">
            {{ i + 1 }}
        </button>
    </div>
</div>

<!-- Modal ng∆∞·ªùi d√πng -->
<div *ngIf="showModal" class="fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50">
    <div class="bg-white rounded-xl shadow-xl p-6 w-full max-w-md animate-fade-in">
        <h3 class="text-lg font-bold text-sky-700 mb-4">
            {{ modalMode === 'add' ? '‚ûï Th√™m ng∆∞·ªùi d√πng' : '‚úèÔ∏è S·ª≠a ng∆∞·ªùi d√πng' }}
        </h3>

        <div class="space-y-4">

        </div>

        <div class="mt-6 flex justify-end gap-2">
            <button (click)="saveUser()"
                class="px-4 py-2 rounded bg-sky-600 text-white hover:bg-sky-700 cursor-pointer">
                üíæ {{ modalMode === 'add' ? 'Th√™m' : 'L∆∞u' }}
            </button>
            <button (click)="closeModal()" class="px-4 py-2 rounded bg-gray-200 hover:bg-gray-300 cursor-pointer">
                ‚ùå ƒê√≥ng
            </button>
        </div>
    </div>
</div>
<style>
    @keyframes fade-in {
        from {
            opacity: 0;
            transform: scale(0.95);
        }

        to {
            opacity: 1;
            transform: scale(1);
        }
    }

    .animate-fade-in {
        animation: fade-in 0.3s ease-out forwards;
    }
</style>