<div class="min-h-screen bg-gray-100 flex flex-col items-center py-10">
  <div class="w-full max-w-6xl bg-white shadow p-8 rounded-xl">
    <h2 class="text-2xl font-semibold mb-6" style="text-align: center;">Tra cứu hành chính</h2>

    <!-- Tabs Old/New -->
    <div class="flex gap-4 mb-6 justify-center">
      <button (click)="switchTab('old')" [class.bg-blue-600]="activeTab === 'old'"
        [class.text-white]="activeTab === 'old'"
        class="px-6 py-2 rounded-lg border border-gray-300 hover:bg-blue-500 hover:text-white transition cursor-pointer">
        Địa chỉ cũ → mới
      </button>
      <button (click)="switchTab('new')" [class.bg-blue-600]="activeTab === 'new'"
        [class.text-white]="activeTab === 'new'"
        class="px-6 py-2 rounded-lg border border-gray-300 hover:bg-blue-500 hover:text-white transition cursor-pointer">
        Địa chỉ mới → cũ
      </button>
    </div>

    <!-- Form -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <div>
        <h3 class="font-semibold mb-2">Chọn địa chỉ {{ activeTab === 'old' ? 'cũ' : 'mới' }}</h3>
        <select [(ngModel)]="selectedProvince" name="province" (change)="onProvinceChange()"
          class="border p-3 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 w-full mb-3">
          <option value="" disabled selected>Chọn Tỉnh/Thành phố</option>
          <option *ngFor="let p of provinces" [value]="p">{{p}}</option>
        </select>

        <select [(ngModel)]="selectedDistrict" name="district" (change)="onDistrictChange()"
          class="border p-3 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 w-full mb-3">
          <option value="" disabled selected>Chọn Quận/Huyện</option>
          <option *ngFor="let d of districts" [value]="d">{{d}}</option>
        </select>

        <select [(ngModel)]="selectedWard" name="ward"
          class="border p-3 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 w-full mb-3">
          <option value="" disabled selected>Chọn Phường/Xã</option>
          <option *ngFor="let w of wards" [value]="w">{{w}}</option>
        </select>

        <button (click)="submitForm()"
          class="bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-500 w-full transition">
          Tra cứu
        </button>
      </div>

      <!-- Kết quả địa chỉ -->
      <div class="flex flex-col justify-start">
        <h3 class="font-semibold mb-2">Kết quả địa chỉ {{ activeTab === 'old' ? 'mới' : 'cũ' }}</h3>
        <div class="border rounded-md p-6 h-full bg-gray-50 flex flex-col justify-center">
          <ng-container *ngIf="convertedAddress; else noResult">
            <p class="text-lg"><b>Phường/Xã:</b>
              {{ activeTab === 'old' ? convertedAddress.newWardName : convertedAddress.oldWardName }}
            </p>

            <!-- Chỉ hiện quận/huyện khi tab mới → cũ -->
            <p class="text-lg" *ngIf="activeTab === 'new'">
              <b>Quận/Huyện:</b> {{ convertedAddress.oldDistrictName }}
            </p>

            <p class="text-lg"><b>Tỉnh/Thành phố:</b>
              {{ activeTab === 'old' ? convertedAddress.newProvinceName : convertedAddress.oldProvinceName }}
            </p>
          </ng-container>

          <ng-template #noResult>
            <p class="text-gray-400">Chưa có dữ liệu</p>
          </ng-template>
        </div>
      </div>
    </div>

    <div *ngIf="error" class="text-red-500 mt-4 font-semibold">{{ error }}</div>
    <div *ngIf="loading" class="text-gray-500 mt-4 font-semibold">⏳ Đang tra cứu...</div>
  </div>
</div>